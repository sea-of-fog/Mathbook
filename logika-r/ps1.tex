\chapter{Logika R, Problemset 1}

\section*{Zadanie 1}

\paragraph{Zdania skwantyfikowane.} Jeśli zdanie ma na początku/górze kwantyfikator, to jest fałszywe, jeśli jest to kwantyfikator egzystencjalny, a jest prawdziwe, jeśli jest to kwantyfikator uniwersalny (tzw. puste spełnienie, \textit{vacuous truth}).

\paragraph{Zdania nieskwantyfikowane.} Jeśli zdanie jest formułą złożoną, ale na górze drzewa rozbioru nie ma kwantyfikatora, to jest ono przykładem pewnego schematu KRZ przez podstawienie doń zdań z kwantyfikatorami na górze. Z definicji prawdy Tarskiego wynika, że możemy \textit{wyliczyć} prawdziwość tego zdania podstawiając wartości zdań skantyfikowanych.

\paragraph{Formuły ze zmiennymi wolnymi.}  Jeśli formuła ma zmienne wolne, to jej prawdziwość jest równoważna prawdziwości uniwersalnego domknięcia, które jest zdaniem skwantyfikwoanym uniwersalnie, a więc jest prawdziwe.

\section*{Zadanie 2}

\subsection*{Zdania} Indukcyjnie (względem struktury schematu \( \alpha \)) pokazujemy silniejszą tezę: \textit{jeśli wartościowanie \( v \) na zmiennych jest zgodne z prawdziwością/fałszywością formuł podstawianych za zmienne w \( \alpha \), wartość podstawionej formuły, to prawdziwość \( \alpha[x_1/\varphi_1, x_2/\varphi_2, \ldots, x_n/\varphi_n] \) jest zgodna z \( [[\alpha]]_v \)}.

\subsection*{Formuły ogólne} Wybierzmy dowolny model i dowolne stałe z niego do podstawienia za zmienne wolne. Podstawiamy wszystkie możliwe stałe tak, by podstawiane formuły nie miały zmiennych wolnych. 

\section*{Zadanie 3}

Oznaczmy przez \( a_1, a_2, \ldots, a_n \) wszystkie zmienne występujące w \( \alpha \), ale nie w \( \beta \). Analogicznie definiujemy \( \beta_1, \beta_2, \ldots, \beta_m \). 

\paragraph{Obserwacja.} Schemat \( \alpha \to \beta \) jest tautologią dokładnie wtedy, gdy wszystkie wartościowania \( v \) t. że \( [[\alpha ]]_v = \top \) spełniają także \( [[\beta ]]_v = \top\).

Znajdziemy formułę zależną tylko od zmiennych \( p_i \) spełnioną przez wszystkie wartościowania spełniające \( \alpha \) oraz taką, że wszystkie wartościowania ją spełniające spełniają \( \beta \). Określmy funkcję
\[ 
    f_\gamma (p_1, \ldots, p_k) = \max\limits_{\overline{a} \in \left\{ 0,\, 1 \right\}^n } f_\alpha(p_1, \ldots, p_k, a_1, \ldots, a_n).
\]

Dla danych wartościowań \( p_i \), jeśli w ogóle istnieje wartościowanie które spełnia \( \alpha \), to \( \gamma \) jest spełniona, w szczególności jest spełniona dla wszystkich (przy ustalonych wartościowaniach \( p_i \)) wartościowań spełniających \( \alpha \).

Ustalmy wartościowania zmiennych \( p_i \). Mamy dwie możliwości: albo dla żadnego wartościowania z tymi wartościami \( p_i \) schemat \( \beta \) nie jest spełniony (i wtedy nie jest też spełnione \( \alpha \) przy tym układzie wartości \( p_i \) ), albo istnieje jakieś wartościowanie dla którego \( \beta \) jest spełniona.

% TODO: co dalej

\paragraph{Uwaga.} To jest wersja interpolacji Craiga dla \textbf{KRZ}.

\section*{Zadanie 4}

Dowodzimy, że dla każdego schematu KRZ \( \alpha \), \( [[\alpha ]]_v = [[\alpha ]]_{v'} \), indukcyjnie względem struktury schematu \( \alpha \).

\section*{Zadanie 5} 

Oba spójniki są zupełne, bo \( \neg \alpha \equiv \alpha \bot \alpha \equiv \alpha \mid \alpha \) oraz \( \alpha \wedge \beta \equiv \neg (\alpha \bot \beta) \equiv (\neg \alpha) \mid (\neg \beta) \).

Dla dowodu w drugą stronę analizujemy możliwy kształt tabeli logicznej takiego spójnika \( \star \). Analizując formuły z jedną zmienną dochodzimy do wniosku, że \( b \star b = b^c \) dla \( b \in \left\{ \top, \bot \right\} \). Jeśli ten spójnik nie jest jednym z wymienionych w zadaniu, to albo \( a \star b = a \) albo \( a \star b = b \) dla \( a, b \in \left\{ \top, \bot \right\} \). Wtedy jednak każda formuła z dwiema zmiennymi zależy tylko od jednej z nich, nie da się więc np. wyrazić \( \alpha \wedge \beta \).

\section*{Zadanie 7}

Dowód w jedną stronę jest oczywistą indukcją względem struktury formuły.

Zauważmy, że \( \alpha \vee \beta \) też daje \( \top \) dla \( \alpha = \top, \beta = \top \), więc też musi być wyrażalne jako formuła z \( \wedge, \to \). Istotnie, działa formuła
\[ 
    (\alpha \leftrightarrow \beta) \to \alpha \wedge \beta,
\]
gdzie \(\alpha \leftrightarrow \beta\) jest skrótem na \( \alpha \to \beta \wedge \beta \to \alpha \). Zatem tak naprawdę możemy próbować definiować formuły z \( \wedge, \vee, \to \). Wtedy:
\begin{align*}
    \alpha &::= v\,\mid\, \alpha \wedge \alpha | \alpha \vee \alpha | \alpha \to \alpha \\
    \neg\alpha &::= \neg \v | \neg\alpha \vee \neg\alpha | \neg\alpha \wedge \neg\alpha | \alpha \wedge \neg\alpha.
\end{align*}
Prowadzimy teraz indukcję po liczbie zmiennych. Bazę zapenwiają formuły \( v \to v \) lub \( v \) (w zależności od wartości formuły przy wartościowaniu \( v \mapsto \bot \)). Do kroku indukcyjnego używamy \textit{rozwinięcia Shannona}
\[ 
    F(v_1, v_2, \ldots, v_n) \equiv v_1 \wedge F(\top, v_2, \ldots, v_n) \vee \neg v_1 \wedge F(\bot, v_2, \ldots, v_n).
\]
Jeśli \( F \) jest funkcją boolowską formuły, która przy wszystkich zmiennych ustalonych na \( \top \) daje \( \bot \), to \( F[v_1/\top] \) też, natomiast \( F[v_1/\bot] \) może dać \( \top \) lub \( \bot \). W zależności od tego, która z tych możliwości zachodzi, korzystamy z różnych możliwości, by otrzymać prawy koniunkt.

\section*{Zadanie 9}

\begin{proof}[\( (\Leftarrow) \)]
    Skoro \( X \vdash \varphi \to \psi \), to tym bardziej \( X \cup \{\varphi\} \vdash \varphi \to \psi \). Niech \( \alpha_1, \alpha_2, \ldots, \alpha_n = \varphi \to \psi \) będzie dowodem świadczącym, że \( X \cup \{ \varphi \} \vdash \varphi \to \psi \). Korzystając z reguły \textbf{MP} możemy rozszerzyć ten dowód do dowodu formalnego \( \alpha_1, \alpha_2, \ldots, \alpha_n = \varphi \to \psi, \psi \), więc \( X \cup \{\varphi\} \vdash \psi \).
\end{proof}

\begin{proof}[\( (\Rightarrow) \)]
    Niech \( \alpha_1, \alpha_2, \ldots, \alpha_n = \psi \) będzie dowodem formalnym poświadczającym, \( X \cup \left\{ \varphi \right\} \vdash \psi \). Pokażemy, że z \( X \) można udowodnić \( \varphi \to \psi \) poprzez dowód \( \varphi \to \alpha_1, \varphi \to \alpha_2, \ldots, \varphi \to \psi \).

    \paragraph{Claim.} Dla każdego \( 0 < i \leqslant n \), \( X \cup \left\{ \varphi \right\} \vdash \alpha_i \).

\begin{proof}[Dowód claimu]
    Dowód \textbf{claimu} prowadzimy przez silną indukcję względem \( i \). Rozważamy przypadki w zależności od tego, jak \( \alpha_i \) zostało wprowadzone do dowodu \( X \cup \left\{ \varphi \right\} \vdash \psi\).

    \begin{enumerate}
        \item \textbf{Przesłanka \( \varphi \).} Ponieważ \( v \to v \) jest tautologią KRZ, możemy skorzystać z aksjomatu \textbf{A0} i pod tę tautologię podstawić \(v := \varphi \), otrzymując \( \varphi \to \varphi \) bez konieczności korzystania z \( \varphi \) jako przesłanki.
        \item Przesłanka \( \eta \in X \). Ponieważ wyprowadzamy dowód z \( X \), możemy użyć tej samej przesłanki. Potem korzystamy z tautologii KKRZ \( v \to (w \to v) \), podstawiając w niej \( v := \eta \), \( w := \varphi \) i korzystamy z reguły \textbf{MP}, by otrzymać dowód \( \varphi \to \eta \).
        \item Aksjomat. Zauważmy, że dalej możemy uzyskać \( \alpha_i \) jako aksjomat. Ponadto, schemat \( v \to (w \to v) \) jest tautologią KRZ, możemy więc jako przykład tautologii uzyskać formułę \( \alpha_i \to (\varphi \to \alpha_i) \), po czym skorzystać z reguły \textbf{MP}, by uzyskać dowód \( \varphi \to \alpha_i \).
        \item Modus ponens. Załóżmy, że \( \alpha_i \) wyprowadziliśmy z \( \alpha_j \) i \( \alpha_k = \alpha_j \to \alpha_i \). Z założenia indukcyjnego \( X \vdash \varphi \to \alpha_j \) i \( X \vdash \varphi \to (\alpha_j \to \alpha_i) \). Schemat \( (v \to w) \to ((v \to (w \to u)) \to (v \to u)) \) jest tautologią KRZ, więc możemy jako jego przykład uzyskać \( (\varphi \to \alpha_j) \to (\varphi \to (\alpha_j \to \alpha_i) \to (\varphi \to \alpha_i)) \), a potem zasotoswać dwukrotnie regułę \textbf{MP}.
        \item \( \forall \)-reguła. Załóżmy, że \( \alpha_i \) wyprowadziliśmy z \( \alpha_j \) za pomocą \( \forall \)-reguły. Wtedy, zzałożenia indukcyjnego \( X \vdash \varphi \to \alpha_j \). Korzystając z \( \forall \)-reguły, możemy udowodnić \( X \vdash \forall v\,\,\varphi \to \alpha_j \), a potem z aksjomatu \textbf{A1} (\( \varphi \) jest zdaniem, więc nie ma zmiennych wolnych) oraz reguły \textbf{MP} uzyskać \( \varphi \to \forall v\,\,\alpha_j \equiv \varphi \to \alpha_i \).
    \end{enumerate}
    
\end{proof}

\end{proof}

\section*{Zadanie 10}

\begin{proof}[\((\Leftarrow)\)]
    Jeśli \( \mathrm{Cn(X)} = \mathrm{Form}_L \), to \( X \vdash \varphi \wedge \neg\varphi \) dla dowolnego zdania \( \varphi \in \mathrm{Prop}_L \), w szczególności np. dla zdania \( \varphi = \forall x. x = x \). Zatem \( X \) jest sprzeczny.
\end{proof}

\begin{proof}[\( (\Rightarrow) \)]
Załóżmy, że \( X \vdash \varphi \wedge \neg \varphi \) i rozważmy dowolną formułę \( \psi \in \mathrm{Form}_L \).
Zauważmy, że \( \alpha \wedge \neg \alpha \to \beta \) jest tautologią KRZ. Korzystając z aksjomatu \textbf{A0} oraz podstawiając \( \varphi, \psi \) pod odpowiednio \( \alpha, \beta \) otrzymujemy
\[ 
    X \vdash \varphi \wedge \neg \varphi \to \psi.
\]
Ponieważ \( X \vdash \varphi \wedge \neg \varphi \), możemy dowód formalny powyższego osądu rozszerzyć, korzystając z reguły \textbf{MP}, do dowodu
\[ 
    X \vdash \psi. 
\]
Ponieważ \( \psi \) było wybrane dowolnie, \( \mathrm{Cn}(X) = \mathrm{Form}_L \)
\end{proof}

\section*{Zadanie 11}

Skonstruujemy szukane rozszerzenie korzystają z \textbf{lematu Kuratowskiego-Zorna}. 

\paragraph{Claim 1.} Niech \( X \) będzie niezupełną, niesprzeczną teorią w języku \( L \), w szczególności niech \( \varphi \) będzie zdaniem takim, że \( X \not\vdash \varphi \) oraz \( X \not\vdash \neg\varphi \). Wtedy \( \mathrm{Cn}(X \cup \left\{ \varphi \right\}) \) jest niesprzeczną teorią ściśle większą niż \( X \).

\begin{proof}[Dowód claimu 1]
Załóżmy nie wprost, że \( X \cup \left\{ \varphi \right\} \) jest sprzeczne. Istnieje zatem zdanie \( \alpha \in \mathrm{Prop}_L \) t. że \( X \cup \left\{ \varphi \right\} \vdash \psi \wedge \neg \psi \). Ponieważ \( (\alpha \wedge \neg \alpha) \to \beta \) jest tautologią KRZ, możemy skorzystać z aksjomatu \textbf{A0} oraz reguły \textbf{MP} możemy udowodnić (podstwiając \( \psi \) za \( \alpha \) oraz \( \neg\varphi \) za \( \beta \)), że \( X \cup \left\{ \varphi \right\} \vdash \neg\varphi\). Z tw. o dedukcji wnioskujemy zatem, że \( X \vdash \varphi \to \neg\varphi \). Ponieważ \( (\alpha \to \neg\alpha) \to \neg\alpha \) jest tautologią KRZ, korzystając z \textbf{A0} oraz \textbf{MP}, że \( X \vdash \neg\varphi \), co jest sprzeczne z założeniami. 
\end{proof}


\paragraph{Claim 2.} Niech \( \left\{ X_\alpha \right\} \) będzie wstępujących łańcuchem niesprzecznych teorii języka \( L \). Wtedy suma \( \bigcup_\alpha X_\alpha \) też jest niesprzeczną teorią.

\begin{proof}[Dowód claimu 2.]
    Claim 2. wynika z finitarnego charakteru dowodliwości. Dokładniej, załóżmy że \( \bigcup_\alpha X_\alpha \vdash \psi \wedge \neg \psi \) dla pewnego zdania \( \psi \in \mathrm{Prop}_L \). W dowodzie formalnym użytych jest tylko skończenie wiele przesłanek.

    Nazwijmy je \( \varphi_1, \varphi_2, \ldots, \varphi_n \). Każda z nich pochodzi z którejś teorii \( X_\alpha \), powiedzmy zatem, że \( \varphi_k \in X_k \). Wtedy w szczególności któraś z teorii \( X_1, X_2, \ldots, X_n \) jest największa, powiedzmy \( X_k \), więc wszystkie przesłanki \( \varphi_i \) do niej należą. To jednak oznaczałoby, że \( X_k \) jest sprzeczna, co prowadzi do sprzeczności.

    Podobnie dowodzimy, że wstępująca suma jest teorią.
\end{proof}

Rozważmy zbiór teorii języka \( L \) rozszerzających \( X \), częściowo uporządkowany przez inkluzję. Z \textbf{claimu 2.} każdy łańcuch w tym zbiorze uporządkowanym ma ograniczenie górne (sumę teorii z tego łańcucha), z \textbf{lematu Kuratowskiego-Zorna} istnieje zatem element maksymalny \( X' \). Z \textbf{claimu 1.} wynika, że dla każdego zdania \( \varphi \) zachodzi albo \( X' \vdash \varphi \) albo \( X' \vdash \neg\varphi \), inaczej moglibyśmy poszerzyć \( X' \) do jeszcze większej teorii rozszerzającej X.
